{"version":3,"file":"vue.js","sources":["../src/observe/dep.js","../src/observe/watcher.js","../src/vdom/index.js","../src/lifecycle.js","../src/compiler/parse.js","../src/compiler/index.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["let id = 0\nclass Dep {\n    constructor() {\n        this.id = id++\n        // 属性的dep要收集watcher，这里存放着当前属性对应的watcher有哪些\n        this.subs = []\n    }\n    depend() {\n        // this.subs.push(Dep.target)\n        Dep.target.addDep(this) // 让watcher记住dep\n    }\n    addSub(watcher) {\n        this.subs.push(watcher)\n    }\n    notify() {\n        this.subs.forEach(watcher => watcher.update())\n    }\n}\nDep.target = null\nexport default Dep;","import Dep from './dep'\nlet id = 0\n\nclass Watcher {\n    constructor(vm, fn, options) {\n        this.id = id++\n        this.renderWatcher = options\n        this.getter = fn\n        this.deps = [] // 后续实现计算属性和一些清理工作需要用到\n        this.depsId = new Set()\n        this.get()\n    }\n    addDep(dep) { // 一个组件 对应着多个属性 重复的属性不需要记录\n        let id = dep.id\n        if (!this.depsId.has(id)) {\n            this.deps.push(dep)\n            this.depsId.add(id)\n            dep.addSub(this) // 让dep也记住watcher\n        }\n    }\n    get() {\n        Dep.target = this\n        this.getter() // 会去vm上取值\n        // 为什么要设置null？ 确保其只在模板中取值的时候才做依赖收集\n        Dep.target = null\n    }\n    update() {\n        // 异步更新\n        queueWatcher(this)\n        // this.get() // 重新渲染\n    }\n    run() {\n        // 真正更新视图\n        console.log('run');\n        this.get()\n    }\n}\nlet queue = []\nlet has = {}\nlet pending = false\nfunction flushSchedulerQueue() {\n    let flushQueue = queue.slice(0)\n    // 初始化队列的相关数据\n    queue = []\n    has = {}\n    pending = false\n    flushQueue.forEach(q => q.run())\n}\nfunction queueWatcher(watcher) {\n    const id = watcher.id;\n    if (!has[id]) {\n        queue.push(watcher)\n        has[id] = true\n        // 不管update执行多少次，最终只执行一轮刷新操作\n        if (!pending) {\n            nextTick(flushSchedulerQueue)\n            pending = true\n        }\n    }\n}\nlet callbacks = []\nlet waiting = false\nfunction flushCallbacks() {\n    let cbs = callbacks.slice(0)\n    waiting = false\n    callbacks = []\n    cbs.forEach(cb => cb())\n}\nlet timerFunc;\nif (Promise) {\n    timerFunc = () => {\n        Promise.resolve().then(flushCallbacks)\n    }\n} else if (MutationObserver) {\n    let observer = new MutationObserver(flushCallbacks)\n    let textNode = document.createTextNode(1)\n    observer.observe(textNode, {\n        characterData: true\n    })\n    timerFunc = () => {\n        textNode.textContent = 2\n    }\n} else if (setImmediate) {\n    timerFunc = () => {\n        setImmediate(flushCallbacks)\n    }\n} else {\n    timerFunc = () => {\n        setTimeout(flushCallbacks)\n    }\n}\nexport function nextTick(cb) {\n    callbacks.push(cb) // 维护nextTick中callback方法\n    if (!waiting) {\n        timerFunc()\n        waiting = true\n    }\n}\nexport default Watcher","export function createElementVNode(vm, tag, data = {}, ...children) {\n    if (data == null) {\n        data = {}\n    }\n    let key = data.key\n    if (key) {\n        delete data.key\n    }\n    return vnode(vm, tag, key, data, children)\n}\nexport function createTextVNode(vm, text) {\n    return vnode(vm, undefined, undefined, undefined, undefined, text)\n}\n// vnode 和 ast 不一样\n// ast 做的是语法层面的转换 他描述的是语法本身 (可以描述js css html)\n// 虚拟dom 描述的dom元素,可以增加一些自定义属性(描述dom的)\n\nfunction vnode(vm, tag, key, data, children, text) {\n    return {\n        vm, tag, key, data, children, text\n    }\n}","import Watcher from './observe/watcher'\nimport { createElementVNode, createTextVNode } from './vdom/index'\nfunction createElm(vnode) {\n    let { tag, data, children, text } = vnode\n    if (typeof tag === 'string') {\n        vnode.el = document.createElement(tag)\n        patchProps(vnode.el, data)\n        children.forEach(child => {\n            vnode.el.appendChild(createElm(child))\n        })\n    } else {\n        vnode.el = document.createTextNode(text)\n    }\n    return vnode.el\n}\nfunction patchProps(el, props) {\n    for (let key in props) {\n        if (key === 'style') {\n            for (let styleName in props.style) {\n                el.style[styleName] = props.style[styleName]\n            }\n        } else {\n            el.setAttribute(key, props[key])\n        }\n    }\n\n}\n// patch既有初始化的功能 又有更新的功能\nfunction patch(oldVNode, vnode) {\n    const isRealElement = oldVNode.nodeType\n    if (isRealElement) {\n        const elm = oldVNode\n        const parentElm = elm.parentNode\n        let newElm = createElm(vnode)\n        parentElm.insertBefore(newElm, elm.nextSibiling)\n        parentElm.removeChild(elm)\n        return newElm\n    } else {\n        // diff算法\n    }\n}\nexport function initLifeCycle(Vue) {\n    Vue.prototype._update = function (vnode) {\n        const vm = this\n        const el = vm.$el\n        vm.$el = patch(el, vnode)\n    }\n    Vue.prototype._c = function () {\n        return createElementVNode(this, ...arguments)\n    }\n    Vue.prototype._v = function () {\n        return createTextVNode(this, ...arguments)\n    }\n    Vue.prototype._s = function (value) {\n        if (typeof value !== 'object') return value\n        return JSON.stringify(value)\n    }\n    Vue.prototype._render = function () {\n        const vm = this\n        return vm.$options.render.call(vm)\n    }\n}\nexport function mountComponent(vm, el) {\n    vm.$el = el\n    // 1.调用render方法产生虚拟节点 虚拟DOM\n    const updateComponent = () => {\n        vm._update(vm._render())\n    }\n    let watcher = new Watcher(vm, updateComponent, true) // true用于标识是一个渲染watcher\n    console.log(watcher);\n    // 2.根据虚拟DOM产生真实DOM\n\n    // 3.插入到el元素中\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst startTagClose = /^\\s*(\\/?)>/\nexport function parseHTML(html) {\n    const ELEMENT_TYPE = 1\n    const TEXT_TYPE = 3\n    const stack = []\n    let currentParent\n    let root\n\n    function createASTElement(tag, attrs) {\n        return {\n            tag,\n            type: ELEMENT_TYPE,\n            children: [],\n            attrs,\n            parent: null\n        }\n    }\n\n    function start(tag, attrs) {\n        let node = createASTElement(tag, attrs)\n        if (!root) {\n            root = node\n        }\n        if (currentParent) {\n            node.parent = currentParent\n            currentParent.children.push(node)\n        }\n        stack.push(node)\n        currentParent = node\n    }\n    function chars(text) {\n        text = text.replace(/\\s/g, '')\n        text && currentParent.children.push({\n            type: TEXT_TYPE,\n            text,\n            parent: currentParent\n        })\n    }\n    function end(tag) {\n        stack.pop()\n        currentParent = stack[stack.length - 1]\n    }\n    // 删除已匹配过的内容\n    function advance(n) {\n        html = html.substring(n)\n    }\n    function parseStartTag() {\n        const start = html.match(startTagOpen)\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs: []\n            }\n            advance(start[0].length)\n            let attr, end;\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                advance(attr[0].length)\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] || true })\n            }\n            if (end) {\n                advance(end[0].length)\n            }\n            return match\n        }\n\n        // console.log(html);\n        return false\n    }\n    while (html) {\n        let textEnd = html.indexOf('<')\n        // 开始标签或结束标签\n        if (textEnd == 0) {\n            const startTagMatch = parseStartTag()\n            if (startTagMatch) {\n\n                start(startTagMatch.tagName, startTagMatch.attrs)\n                continue\n            }\n            let endTagMatch = html.match(endTag)\n            if (endTagMatch) {\n                end(endTagMatch[1])\n                advance(endTagMatch[0].length)\n                continue\n            }\n        }\n        if (textEnd > 0) {\n            let text = html.substring(0, textEnd)\n            if (text) {\n                chars(text)\n                advance(text.length)\n            }\n        }\n    }\n    return root\n}","import { parseHTML } from \"./parse\";\nfunction genProps(attrs) {\n    let str = ''\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i]\n        if (attr.name === 'style') {\n            let obj = {}\n            attr.value.split(';').forEach(item => {\n                let [key, value] = item.split(':')\n                key = key.trim()\n                value = value.trim()\n                obj[key] = value\n            })\n            attr.value = obj\n        }\n\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\n\n    }\n    return `{${str.slice(0, -1)}}`\n}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\nfunction gen(node) {\n    // 元素\n    if (node.type === 1) {\n        return codegen(node)\n    } else {\n        let text = node.text\n        // 普通文本\n        if (!defaultTagRE.test(text)) {\n            return `_v(${JSON.stringify(text)})`\n        } else {\n            // 带有{{}}的\n            let tokens = []\n            let match\n            defaultTagRE.lastIndex = 0\n            let lastIndex = 0\n            while (match = defaultTagRE.exec(text)) {\n                let index = match.index\n                if (index > lastIndex) {\n                    tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n                }\n                tokens.push(`_s(${match[1].trim()})`)\n                lastIndex = index + match[0].length\n            }\n            if (lastIndex < text.length) {\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\n            }\n            return `_v(${tokens.join('+')})`\n        }\n    }\n}\nfunction genChildren(children) {\n    return children.map(child => gen(child)).join(',')\n}\nfunction codegen(ast) {\n    // _c 创建元素\n    // _v 创建文本\n    // _s JSON.stringify\n    let children = ast.children && genChildren(ast.children)\n    let code = (\n        `_c('${ast.tag}',\n        ${ast.attrs.length > 0 ? genProps(ast.attrs) : 'null'}\n        ${ast.children.length ? `,${children}` : ''})`)\n\n    return code\n}\nexport function compileToFunction(template) {\n    let ast = parseHTML(template)\n    let code = codegen(ast)\n    code = `with(this){return ${code}}`\n    let render = new Function(code)\n    return render\n}","let oldArrayProto = Array.prototype\n// newArrayProto.__proto__ == oldArrayProto\nexport let newArrayProto = Object.create(oldArrayProto)\n\nlet methods = [\n    'push',\n    'pop',\n    'shift',\n    'unshift',\n    'splice',\n    'sort',\n    'reverse'\n]\nmethods.forEach(method => {\n    newArrayProto[method] = function (...args) {\n        console.log('method', method);\n        const result = oldArrayProto[method].call(this, ...args)\n        let inserted\n        let ob = this.__ob__\n        switch (method) {\n            case 'push':\n            case 'unshift':\n                inserted = args\n                break;\n            case 'splice':\n                inserted = args.slice(2)\n                break;\n            default:\n                break;\n        }\n        if (inserted) {\n            ob.observeArray(inserted)\n        }\n        return result\n    }\n})","import { newArrayProto } from \"./array\"\nimport Dep from \"./dep\"\n\nclass Observer {\n    constructor(data) {\n        Object.defineProperty(data, '__ob__', {\n            value: this,\n            enumerable: false\n        })\n        // data.__ob__ = this\n        if (Array.isArray(data)) {\n            data.__proto__ = newArrayProto\n            this.observeArray(data)\n        } else {\n            this.walk(data)\n        }\n    }\n    walk(data) {\n        Object.keys(data).forEach((key) => defineReactive(data, key, data[key]))\n    }\n    observeArray(data) {\n        data.forEach(item => observe(item))\n    }\n}\nexport function observe(data) {\n    if (typeof data !== 'object' || data === null) return\n    return new Observer(data)\n}\nexport function defineReactive(target, key, value) {\n    observe(value) //对深层嵌套的对象也进行属性劫持\n    let dep = new Dep()\n    Object.defineProperty(target, key, {\n        get() {\n            if (Dep.target) {\n                dep.depend()\n            }\n            // console.log(`获取${key}属性，值为${value}`);\n            return value\n        },\n        set(newValue) {\n            if (newValue === value) return\n            // console.log(`修改${key}属性，值为${newValue}`);\n            observe(newValue)\n            value = newValue\n            dep.notify() // 通知更新视图\n        }\n    })\n}","import { observe } from \"./observe/index.js\"\n\nexport function initState(vm) {\n    const opts = vm.$options\n    if (opts.data) {\n        initData(vm)\n    }\n}\nexport function proxy(vm, target, key) {\n    Object.defineProperty(vm, key, {\n        get() {\n            return vm[target][key]\n        },\n        set(newValue) {\n            vm[target][key] = newValue\n        }\n    })\n}\nfunction initData(vm) {\n    let data = vm.$options.data\n    data = typeof data === 'function' ? data.call(vm) : data\n    vm._data = data\n    observe(data)\n    // 数据劫持\n    for (let key in data) {\n        proxy(vm, '_data', key)\n    }\n}","import { mountComponent } from \"./lifecycle\"\nimport { compileToFunction } from \"./compiler/index\"\nimport { initState } from \"./state\"\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        let vm = this\n        vm.$options = options\n        initState(vm)\n        if (options.el) {\n            vm.$mount(options.el)\n        }\n    }\n    Vue.prototype.$mount = function (el) {\n        const vm = this\n        let ops = this.$options\n        el = document.querySelector(el)\n        // 编译优先级： render>tamplate>el\n        if (!ops.render) {\n            let template = ops.template\n            if (!template && el) {\n                template = el.outerHTML\n            }\n            // 模板编译\n            if (template) {\n                const render = compileToFunction(template)\n                ops.render = render\n            }\n\n        }\n        // 组件的挂载\n        mountComponent(vm, el)\n    }\n}\n","import { initLifeCycle } from \"./lifecycle\"\nimport { initMixin } from \"./init\"\nimport { nextTick } from \"./observe/watcher\"\n\nfunction Vue(options) {\n    this._init(options)\n}\nVue.prototype.$nextTick = nextTick\ninitMixin(Vue)\ninitLifeCycle(Vue)\nexport default Vue"],"names":["id","Dep","subs","target","addDep","watcher","push","forEach","update","Watcher","vm","fn","options","renderWatcher","getter","deps","depsId","Set","get","dep","has","add","addSub","queueWatcher","console","log","queue","pending","flushSchedulerQueue","flushQueue","slice","q","run","nextTick","callbacks","waiting","flushCallbacks","cbs","cb","timerFunc","Promise","resolve","then","MutationObserver","observer","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","createElementVNode","tag","data","key","children","vnode","createTextVNode","text","undefined","createElm","el","createElement","patchProps","child","appendChild","props","styleName","style","setAttribute","patch","oldVNode","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibiling","removeChild","initLifeCycle","Vue","prototype","_update","$el","_c","arguments","_v","_s","value","JSON","stringify","_render","$options","render","call","mountComponent","updateComponent","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","attrs","type","parent","start","node","chars","replace","end","pop","length","advance","n","substring","parseStartTag","match","tagName","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","genProps","str","i","obj","split","item","trim","defaultTagRE","gen","codegen","test","tokens","lastIndex","exec","index","join","genChildren","map","ast","code","compileToFunction","template","Function","oldArrayProto","Array","newArrayProto","Object","create","methods","method","args","result","inserted","ob","__ob__","observeArray","Observer","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","depend","set","newValue","notify","initState","opts","initData","proxy","_data","initMixin","_init","$mount","ops","querySelector","outerHTML","$nextTick"],"mappings":"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"}